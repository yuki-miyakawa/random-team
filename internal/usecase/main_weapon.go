package usecase

import (
	"fmt"
	"math/rand"
	"net/http"
	"os"
	"strings"

	"github.com/labstack/echo/v4"
	"github.com/yuki-miyakawa/discord"
)

type MemberMainWeapon struct {
	Name       string
	MainWeapon string
}

var mainWeaponThree = []string{
	"ボールドマーカー",
	"ボールドマーカーネオ",
	"わかばシューター",
	"もみじシューター",
	"シャープマーカー",
	"シャープマーカーネオ",
	"プロモデラーMG",
	"プロモデラーRG",
	"スプラシューター",
	"スプラシューターコラボ",
	"ヒーローシューター レプリカ",
	"オクタシューター レプリカ",
	"オーダーシューター レプリカ",
	".52ガロン",
	".52ガロンデコ",
	"N-ZAP85",
	"N-ZAP89",
	"プライムシューター",
	"プライムシューターコラボ",
	".96ガロン",
	".96ガロンデコ",
	"ジェットスイーパー",
	"ジェットスイーパーカスタム",
	"スペースシューター",
	"スペースシューターコラボ",
	"L3リールガン",
	"L3リールガンD",
	"H3リールガン",
	"H3リールガンD",
	"ボトルガイザー",
	"ボトルガイザーフォイル",
	"カーボンローラー",
	"カーボンローラーデコ",
	"スプラローラー",
	"スプラローラーコラボ",
	"オーダーローラー レプリカ",
	"ダイナモローラー",
	"ダイナモローラーテスラ",
	"ヴァリアブルローラー",
	"ヴァリアブルローラーフォイル",
	"ワイドローラー",
	"ワイドローラーコラボ",
	"スクイックリンα",
	"スクイックリンβ",
	"スプラチャージャー",
	"スプラチャージャーコラボ",
	"オーダーチャージャー レプリカ",
	"スプラスコープ",
	"スプラスコープコラボ",
	"リッター4K",
	"リッター4Kカスタム",
	"4Kスコープ",
	"4Kスコープカスタム",
	"14式竹筒銃・甲",
	"14式竹筒銃・乙",
	"ソイチューバー",
	"ソイチューバーカスタム",
	"R-PEN/5H",
	"R-PEN/5B",
	"バケットスロッシャー",
	"バケットスロッシャーデコ",
	"オーダースロッシャー レプリカ",
	"ヒッセン",
	"ヒッセン・ヒュー",
	"スクリュースロッシャー",
	"スクリュースロッシャーネオ",
	"オーバーフロッシャー",
	"オーバーフロッシャーデコ",
	"エクスプロッシャー",
	"エクスプロッシャーカスタム",
	"モップリン",
	"モップリンD",
	"スプラスピナー",
	"スプラスピナーコラボ",
	"バレルスピナー",
	"バレルスピナーデコ",
	"オーダースピナー レプリカ",
	"ハイドラント",
	"ハイドラントカスタム",
	"クーゲルシュライバー",
	"クーゲルシュライバー・ヒュー",
	"ノーチラス47",
	"ノーチラス79",
	"イグザミナー",
	"イグザミナー・ヒュー",
	"スパッタリー",
	"スパッタリー・ヒュー",
	"スプラマニューバー",
	"スプラマニューバーコラボ",
	"オーダーマニューバー レプリカ",
	"ケルビン525",
	"ケルビン525デコ",
	"デュアルスイーパー",
	"デュアルスイーパーカスタム",
	"クアッドホッパーブラック",
	"クアッドホッパーホワイト",
	"ガエンFF",
	"ガエンFFカスタム",
	"パラシェルター",
	"パラシェルターソレーラ",
	"オーダーシェルター レプリカ",
	"キャンピングシェルター",
	"キャンピングシェルターソレーラ",
	"スパイガジェット",
	"スパイガジェットソレーラ",
	"24式張替傘・甲",
	"24式張替傘・乙",
	"ノヴァブラスター",
	"ノヴァブラスターネオ",
	"オーダーブラスター レプリカ",
	"ホットブラスター",
	"ホットブラスターカスタム",
	"ロングブラスター",
	"ロングブラスターカスタム",
	"クラッシュブラスター",
	"クラッシュブラスターネオ",
	"ラピッドブラスター",
	"ラピッドブラスターデコ",
	"Rブラスターエリート",
	"Rブラスターエリートデコ",
	"S-BLAST92",
	"S-BLAST91",
	"パブロ",
	"パブロ・ヒュー",
	"ホクサイ",
	"ホクサイ・ヒュー",
	"オーダーブラシ レプリカ",
	"フィンセント",
	"フィンセント・ヒュー",
	"トライストリンガー",
	"トライストリンガーコラボ",
	"オーダーストリンガー レプリカ",
	"LACT-450",
	"LACT-450デコ",
	"フルイドV",
	"フルイドVカスタム",
	"ジムワイパー",
	"ジムワイパー・ヒュー",
	"オーダーワイパー レプリカ",
	"ドライブワイパー",
	"ドライブワイパーデコ",
	"デンタルワイパーミント",
	"デンタルワイパースミ",
}

var mainWeaponTwo = []string{
	"わかばシューター",
	"もみじシューター",
	"おちばシューター",
	"スプラシューター",
	"スプラシューターコラボ",
	"スプラシューターベッチュー",
	"プライムシューター",
	"プライムシューターコラボ",
	"プライムシューターベッチュー",
	".52ガロン",
	".52ガロンデコ",
	".52ガロンベッチュー",
	".96ガロン",
	".96ガロンデコ",
	"ジェットスイーパー",
	"ジェットスイーパーカスタム",
	"ボールドマーカー",
	"ボールドマーカーネオ",
	"ボールドマーカー7",
	"シャープマーカー",
	"シャープマーカーネオ",
	"N-ZAP85",
	"N-ZAP89",
	"N-ZAP83",
	"プロモデラーMG",
	"プロモデラーRG",
	"プロモデラーPG",
	"ホットブラスター",
	"ホットブラスターカスタム",
	"ロングブラスター",
	"ロングブラスターカスタム",
	"ロングブラスターネクロ",
	"ラピッドブラスター",
	"ラピッドブラスターデコ",
	"ラピッドブラスターベッチュー",
	"Rブラスターエリート",
	"Rブラスターエリートデコ",
	"ノヴァブラスター",
	"ノヴァブラスターネオ",
	"ノヴァブラスターベッチュー",
	"クラッシュブラスター",
	"クラッシュブラスターネオ",
	"L3リールガン",
	"L3リールガンD",
	"L3リールガンベッチュー",
	"H3リールガン",
	"H3リールガンD",
	"H3リールガンチェリー",
	"ボトルガイザー",
	"ボトルガイザーフォイル",
	"スプラローラー",
	"スプラローラーコラボ",
	"スプラローラーベッチュー",
	"カーボンローラー",
	"カーボンローラーデコ",
	"ヴァリアブルローラー",
	"ヴァリアブルローラーフォイル",
	"ダイナモローラー",
	"ダイナモローラーテスラ",
	"ダイナモローラーベッチュー",
	"パブロ",
	"パブロ・ヒュー",
	"パーマネント・パブロ",
	"ホクサイ",
	"ホクサイ・ヒュー",
	"ホクサイベッチュー",
	"スプラチャージャー",
	"スプラチャージャーコラボ",
	"スプラチャージャーベッチュー",
	"スプラスコープ",
	"スプラスコープコラボ",
	"スプラスコープベッチュー",
	"リッター4K",
	"リッター4Kカスタム",
	"4Kスコープ",
	"4Kスコープカスタム",
	"ソイチューバー",
	"ソイチューバーカスタム",
	"スクイックリンα",
	"スクイックリンβ",
	"スクイックリンγ",
	"14式竹筒銃・甲",
	"14式竹筒銃・乙",
	"14式竹筒銃・丙",
	"バケットスロッシャー",
	"バケットスロッシャーデコ",
	"バケットスロッシャーソーダ",
	"ヒッセン",
	"ヒッセン・ヒュー",
	"スクリュースロッシャー",
	"スクリュースロッシャーネオ",
	"スクリュースロッシャーベッチュー",
	"オーバーフロッシャー",
	"オーバーフロッシャーデコ",
	"エクスプロッシャー",
	"エクスプロッシャーカスタム",
	"バレルスピナー",
	"バレルスピナーデコ",
	"バレルスピナーリミックス",
	"スプラスピナー",
	"スプラスピナーコラボ",
	"スプラスピナーベッチュー",
	"ハイドラント",
	"ハイドラントカスタム",
	"クーゲルシュライバー",
	"クーゲルシュライバー・ヒュー",
	"ノーチラス47",
	"ノーチラス79",
	"スプラマニューバー",
	"スプラマニューバーコラボ",
	"スプラマニューバーベッチュー",
	"スパッタリー",
	"スパッタリー・ヒュー",
	"スパッタリークリア",
	"デュアルスイーパー",
	"デュアルスイーパーカスタム",
	"ケルビン525",
	"ケルビン525デコ",
	"ケルビン525ベッチュー",
	"クアッドホッパーブラック",
	"クアッドホッパーホワイト",
	"パラシェルター",
	"パラシェルターソレーラ",
	"キャンピングシェルター",
	"キャンピングシェルターソレーラ",
	"キャンピングシェルターカーモ",
	"スパイガジェット",
	"スパイガジェットソレーラ",
	"スパイガジェットベッチュー",
}

func MainWeaponThree(c echo.Context) error {
	memStr := os.Getenv("MEMBERS")
	memSlice := strings.Split(memStr, ",")
	members := make([]MemberMainWeapon, len(memSlice))
	for i, v := range memSlice {
		members[i] = MemberMainWeapon{
			Name:       v,
			MainWeapon: mainWeaponThree[rand.Intn(len(mainWeaponThree))],
		}
	}
	text := make([]string, len(members))
	for i, v := range members {
		text[i] = fmt.Sprintf("%s: %s", v.Name, v.MainWeapon)
	}
	joinedText := strings.Join(text, "\n")
	if err := discord.SendMessage(joinedText); err != nil {
		return c.JSON(http.StatusInternalServerError, "failed to send message")
	}
	return c.JSON(http.StatusOK, "random weapon 3")
}

func MainWeaponTwo(c echo.Context) error {
	memStr := os.Getenv("MEMBERS")
	memSlice := strings.Split(memStr, ",")
	members := make([]MemberMainWeapon, len(memSlice))
	for i, v := range memSlice {
		members[i] = MemberMainWeapon{
			Name:       v,
			MainWeapon: mainWeaponTwo[rand.Intn(len(mainWeaponTwo))],
		}
	}
	text := make([]string, len(members))
	for i, v := range members {
		text[i] = fmt.Sprintf("%s: %s", v.Name, v.MainWeapon)
	}
	joinedText := strings.Join(text, "\n")
	if err := discord.SendMessage(joinedText); err != nil {
		return c.JSON(http.StatusInternalServerError, "failed to send message")
	}
	return c.JSON(http.StatusOK, "random weapon 2")
}
